<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="//d3js.org/topojson.v1.min.js"></script>
    <title>FCC Choropleth</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script>
        //declare  variables
        const w = 1315;
        const h = 650;
        const hCell = 30; //height of each cell
        const wCell = 5; //width of each cell
        const padding = 40;
        const bottomPadding = 120;
        
        let eduData = {};
        d3.json("https://raw.githubusercontent.com/no-stack-dub-sack/testable-projects-fcc/master/src/data/choropleth_map/for_user_education.json")
        .then(function(data) {eduData = data});
        
        const map = d3.select("figure").append("svg")
        .attr("width", w)
        .attr("height", h);
        
        
        
        d3.json("https://raw.githubusercontent.com/no-stack-dub-sack/testable-projects-fcc/master/src/data/choropleth_map/counties.json")
        .then(function(topo){
            
            const map = d3.select("figure").append("svg")
            .attr("width", w)
            .attr("height", h);
            
            
            
            const geoTopo = topojson.feature(topo, topo.objects.counties);
            
            const mapGen = d3.geoPath(d3.geoAlberUsa);
            
            map.selectAll("path")
            .data(geoTopo.features)
            .enter()
            .append("path")
            .attr("d", d3.geoPath(d3.geoAlberUsa))
            .attr("class", "county")
            .attr("id", d => d.id)
            .attr("data-fips", d => d.id)
            //join educational data below using filter method referncing d.id
            .attr("data-education", d => {
                eduData.filter()
            });
            
            /* map.selectAll("path")
            .data(eduData, function(d) {d.fips === this.id ? d.fips : this.id})
            .attr("data-e ducation", d => d.bachelorsOrHigher);*/
            
            
            /* map.append("path")
            .datum(geoTopo)
            .attr("d",  d3.geoPath(d3.geoAlberUsa)); */
            
            console.log("THIS SHOULD BE GEOJSON: " + JSON.stringify(geoTopo));
            
            
            
            //add description here            //map description
            map.append("desc")
            .attr("id", "description")
            .append("text")
            .text("");
            
            /* 
            .on("mouseover", showTip)
            .on("mousemove", d => moveTip(d))
            .on("mouseout", hideTip);
            
            //tooltip declaration and functions copied and modifired from https://bl.ocks.org/mbostock/1087001
            let tooltip = d3.select("body")
            .append("div")
            .attr("id", "tooltip")
            .style("display", "none");
            
            
            function showTip() {
                tooltip.style("display", "inline");
            }
            
            function moveTip(data) {
                tooltip.text(monthFormat(mmDate(data.month)) + " " + data.year + ";  Temp: " + (data.variance + 8.66).toFixed(3))
                .attr("data-year", data.year)
                .style("left", (d3.event.pageX + 5) + "px")
                .style("top", (d3.event.pageY - 20) + "px");
            }
            
            function hideTip() {
                tooltip.style("display", "none");
            }; */
            
            
            
            
            
            
            /* 
            //legend
            const legend = graph.append("svg")
            .attr("height", 100)
            .attr("width", 300)
            .attr("x", 120)
            .attr("y", 570)
            .attr("transform", "translate(" + padding + ", 500)")
            .attr("id", "legend"); 
            
            //create array 0 to 1 by increments of .01
            const arr1 = [];
            let x = -6.976;
            for(let i = 0; i < 100; i++){
                arr1.push(x);
                x = x + .122;
            }
            
            legend.selectAll("rect")
            .data(arr1)
            .enter()
            .append("rect")
            .attr("x", (d, i) => ((i * 3)))
            .attr("y", 15)
            .attr("width", 3)
            .attr("height", 50)
            .attr("fill", d => colorScale(d));
            
            legend.append("text")
            .attr("x", 5)
            .attr("y", 45)
            .attr("fill", "white")
            .text(-6.976);
            
            legend.append("text")
            .attr("x", 260)
            .attr("y", 45)
            .attr("fill", "white")
            .text(5.228);
            
            legend.append("text")
            .text("Temp Variance (Celsius)")
            .attr("x", 65)
            .attr("y", 12); */
            
            
            //test output
            //console.log("Educational DATA: " + JSON.stringify(eduData));
            
        });
    </script>
    
    <h1 id="title">Choropleth</h1>
    <h2 id="subtitle">US Educational Attainment by County</h2>
    <figure></figure>
    
    <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
</body>
</html>